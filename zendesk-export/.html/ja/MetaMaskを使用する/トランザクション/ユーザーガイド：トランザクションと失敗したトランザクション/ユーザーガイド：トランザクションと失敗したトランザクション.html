<div class="callout callout--success">
<h4 id="01GRVFH3WQZAEN1PPJ4PTRJNH1">暗号通貨やweb3は初めてですか？</h4>
<p><a href="https://learn.metamask.io/">MetaMask Learn</a>で、web3を初めて使う人のために特別に設計された分かりやすい学習体験を提供しています。完全に無料で、複数の言語で利用することができ、MetaMaskに慣れるためのシミュレーションなどの便利なツールも含まれています。</p>
</div>

<h4 id="01GRVFZVD9WXPHNGSGH5X5AD96"><em>この記事は、トランザクションとその失敗の原因に関する説明および資料へのリンク、さらには、よくあるトランザクションの失敗のシナリオとその対処方法についてのリンクで構成されています。</em></h4>
<ul>
<li><a href="#h_01G79J04D0EN1VD8VS7C7J7KD1" target="_self">ブロックチェーントランザクションを解剖する</a></li>
<li><a href="#h_01G79J09NWA8CGR4VYC2PT5B6Y" target="_self">一般的な問題</a></li>
<li><a href="#h_01G79J0J8JTRPM9MRB76EN1GPP" target="_self">主な修正点</a></li>
<li><a href="#h_01G79J0RP8ZMZ1V1SKQY70TXCT" target="_self">追加リソースと次のステップ</a></li>
<li><a href="#h_01G79J18RBK27GZCF10CGN9GKP" target="_self">FAQ</a></li>
</ul>
<p> </p>
<h2 id="h_01G79J04D0EN1VD8VS7C7J7KD1"><strong>ブロックチェーントランザクションを解剖する</strong></h2>
<p>パブリックブロックチェーンネットワークで「トランザクション」について言及する場合、通常は、2つのアドレス間のやり取りについて話しています。言い換えれば、ファンジブルトークンであろうとなかろうとトークンを、あるいは他の暗号資産をあるアドレスから別のアドレスに「送信」することを言います。また、「内部トランザクション」と言及されるトランザクションもあります。これは、スマートコントラクト間で行われるやり取りで、この記事の対象外となっています。</p>
<div class="note note--info">
<h4 id="01GRVFZVD9JJ5G8Z7S4AE9G1ME" class="note-title">詳細については、こちらをご覧ください。</h4>
<p>ブロックチェーンネットワークやその一般的な機能のしくみについての詳細は、<a href="https://metamask.zendesk.com/hc/en-us/articles/360015489611-Learn-the-basics-of-blockchains-and-Ethereum-miners-and-validators-gas-cryptocurrencies-and-NFTs-block-explorer-networks-etc-">こちらの紹介記事</a>をご覧ください。見慣れない言葉にお困りの場合は、<a href="https://consensys.net/knowledge-base/a-blockchain-glossary-for-beginners/">用語集も用意しています</a>。</p>
</div>
<p>正確に言うと、実際には何もどこにも<em>送信</em>されません。Ethereumのようなスマートコントラクト対応のブロックチェーンネットワークには、さまざまなコンポーネントや機能があります。その1つは、「コンピュータ」と呼ばれるものです。つまりEthereum Virtual Machine（EVM）で、プログラム（「スマートコントラクト」）を実行できます。しかし、システムの「バックボーン」となる部分は、<em>分散型台帳</em>です。<strong>片方にすべての個別のEthereumウォレットアドレスが記載され、それぞれのアドレスにアドレスが持つ暗号資産の種類用の列があるスプレッドシートを想像してください。</strong></p>
<p>例を用いて説明しましょう。GuillaumeがDoloresにトランザクションを送信したいとします。Guillaumeは、自分のアカウントに1.36ETH持っており、Doloresに、0.5ETH送信する予定です。弱気相場でも、Doloresにとって素敵な日になりそうですね。</p>
<p>Guillaumeは、自分のMetaMaskウォレットを開き、Doloresのアドレスを入力し、支払うのに問題のないガスパラメータを設定し、「send」（送信）を押します。</p>
<p>この時点で、トランザクションは、<em>ローカルメモリプール</em>、あるいは<em>ローカルメムプール</em>として知られているローカルの一時的な保持状態に入ります。このトランザクションは、その後ネットワーク上の最も近いノードによって「ピックアップ」されます。Guillaumeの<a href="https://metamask.zendesk.com/hc/en-us/articles/360022895972-Using-advanced-gas-controls">ガス設定</a>に応じて、トランザクションが優先されることになり（<strong>Guillaumeの<a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">ガスユニット</a>あたりの支払額が多いほど、トランザクションはより速く処理されます</strong>）、そして、ネットワーク上の他のノードに伝播されます。ノードは、Guillaumeが支払うETHを持っていることを確認する作業を行い、実際に「トランザクション」を実行します。<strong>そして台帳が変更されます。Guillaumeの残高から0.5が引き落とされ、Doloresの残高に0.5が入金されます。</strong></p>
<p><em>「動く手は、書き込んだ後、移動していく」。</em>ETHはネットワークを通じて瞬時に移動したわけではありません。GuillaumeのコンピュータからDoloresのMetaMaskの受信トレイあるいは同様のものに送られたメールとは異なります。Guillaumeがリクエストを送信しました。これは<strong><a href="https://metamask.zendesk.com/hc/en-us/articles/4404722782107-User-guide-Secret-Recovery-Phrase-password-and-private-keys">MetaMaskを通じて秘密鍵</a>によって認証され、</strong>ネットワークに送信され、彼のアカウントから差し引かれ、Doloresのアカウントに追加されます。ネットワークプロトコルにプログラムされた認証プロセスを経たのちに、実行されます。</p>
<h4 id="01GRVFZVD9GG3MHV265Q5QBB9S"><em>トランザクションとはそれだけのことです。あるアドレスから別のアドレスに何かを再割り当てするための、台帳へのリクエストのことです。</em></h4>
<p> </p>
<h2 id="h_01G79J09NWA8CGR4VYC2PT5B6Y"><strong>うまくいかなかった場合</strong></h2>
<p>さまざまな理由で、うまくいかないことがあります。しばしば、それらが「ソフトウェアの本質」というものです。MetaMaskにはバグがありますし、使用しようとしているネットワークでもなにか間違って設定されていることがあります。また、接続エラーもあります。</p>
<p><strong>共通する問題には、トランザクションで支払いを少なくしようとして、ユーザーがガスリミットを大変低く設定するというものがあります。</strong>そしてネットワークが大変混雑して、そのような「安い」トランザクションを引き受けるスペースが、時には長時間どのブロックにもない状態が続きます。その結果、トランザクションは「古く」なってしまい、ユーザーはキャンセルせざるを得なくなります。</p>
<p><strong>トランザクションを送信したにもかかわらずファイナライズされない場合は</strong>、MetaMask上で状態が「pending」（保留）と表示されます。</p>
<p><strong>トランザクションに失敗した場合、最も多い原因は、ガスの不足です</strong>。言い換えれば「ガス欠」です。そのトランザクションにかかるガスのコストがガス価格を乗じると、ネットワークのネイティブ通貨の総額がウォレットに入っている額より大きくなってしまったのが原因です。</p>
<div class="note note--info">
<h4 id="01GRVFZVD9GH1B7F94WN13F3BH" class="note-title">インフォメーション</h4>
<p>ガスの計算についての詳細は、<a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">こちらのガスガイド</a>をご覧ください。</p>
</div>
<p>これが起こる理由は多くありますが、一つ考慮しておくべきことは、実行しようとしているトランザクションは何かということです。ネットワークトラフィックのピーク時にNFTをミントするには、大量にガスを消費します。もし、新しいあるいは実験的なトランザクションを試そうとしているのであれば、実際のライブネットワーク代を支払う前に、テストネットワークで試す価値があるかもしれません。</p>
<p> </p>
<h2 id="h_01G79J0J8JTRPM9MRB76EN1GPP"><strong>問題の解決</strong></h2>
<h3 id="01GRVFZVD9D3PVW0CHP2JYRM1A"><strong>重要な要因　その1。ローカルまたはネットワークへのブロードキャスト</strong></h3>
<p>トランザクションの問題を診断する際に、特にトランザクションが保留になってしまった場合、トランザクションがまだローカルのメムプールにあるのか、あるいはすでにネットワークにあるが、何らかの理由でそこにスタックされているのか、を確認する必要があります。まだローカルメムプールにある場合は、解決するのはシンプルで、自分のMetaMaskウォレットをロックし、解除するというだけです。（<strong>これを行う前に、ご自分のパスワードとSecret Recovery Phraseを覚えていることを必ず確認してください</strong>）ネットワークでスタックされている場合、解決するのはより複雑になる可能性があります。</p>
<p>これらの問題を解決する詳細については、以下のリンクをご覧ください。<br><br></p>
<h3 id="01GRVFZVD9J3NB03974CZWTT8A"><strong>重要な要因　その2。ノンス</strong></h3>
<p>この言葉は、いくつか異なることを意味する可能性があります。これは「number only used once」（1回のみ使用された番号）の短縮形であり、この文脈では、送信アドレスが行った最初のトランザクションから始まる、「トランザクション番号」を大まかに指します。例えば、同じウォレットアドレスで、MetaMaskの異なるインスタンスから異なる2つのトランザクションを同時に開始しようとする場合、これは本当に困ったことになります。<strong>あなたのアドレスのトランザクションは、そのノンスに従い、昇順である必要があります。</strong>しかし、ノンスがトランザクションのスタックを引き起こす可能性がある場合、ノンスはトランザクションを円滑に進めるカギとなり得ます。</p>
<p>この方法についての詳細は、<a href="https://metamask.zendesk.com/hc/en-us/articles/360015489251-How-to-Speed-Up-or-Cancel-a-Pending-Transaction">こちらをご覧ください</a>。</p>
<p> </p>
<h2 id="h_01G79J0RP8ZMZ1V1SKQY70TXCT"><strong>次のステップ</strong></h2>
<h3 id="01GRVFZVD9Q63NF0SYR69AWPG6"><em>失敗、保留中のトランザクションがある場合は、次のリソースに相談してサポートを受けてください。</em></h3>
<h4 id="01GRVFZVD9NFGVSXR55JG8EYQK"><a href="https://metamask.zendesk.com/hc/en-us/articles/360015488931">MetaMaskウォレットからトークンを送信する方法</a></h4>
<h4 id="01GRVFZVD9N387HEW5ZJ53MK5Z"><a href="https://metamask.zendesk.com/hc/en-us/articles/360015489251-How-to-Speed-Up-or-Cancel-a-Pending-Transaction">保留中トランザクションをスピードアップあるいはキャンセルする方法</a></h4>
<h4 id="01GRVFZVD9TWRFF00FPPWFFYSD" class="article-title" title="トランザクションが「Out of Gas」（ガス欠）のエラーで失敗したのはなぜですか。どのように解決できますか。"><a href="https://metamask.zendesk.com/hc/en-us/articles/360038849792-Why-did-my-transaction-fail-with-an-Out-of-Gas-error-How-can-I-fix-it-">トランザクションが「Out of Gas」（ガス欠）のエラーで失敗したのはなぜですか。</a></h4>
<h4 id="01GRVFZVD9XJVVHQK3J9F5Q4Z8"><a href="https://metamask.zendesk.com/hc/en-us/articles/360053394291-Uniswap-support-and-troubleshooting-tips">Uniswapトラブルシューティング</a></h4>
<h4 id="01GRVFZVD9V5KZ7999CR0DHGGZ"><a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">ユーザーガイド、ガス</a></h4>
<h4 id="01GRVFZVD9RDMNCVPMRVY7ZVGP"><a href="https://metamask.zendesk.com/hc/en-us/articles/360059957352-Can-I-reverse-an-already-confirmed-transaction-">確認済みのトランザクションを元に戻すことはできますか。</a></h4>
<p> </p>
<h2 id="h_01G79J18RBK27GZCF10CGN9GKP"><strong>FAQ</strong></h2>
<h4 id="01GRVFZVD9XESKW1CA31WM5PWS">
<em>質問。ウォレットのあるアカウントに、保留中あるいは順番待ちのトランザクションがあります。同じウォレットの別のアカウントから別のトランザクションを開始することはできますか。<br></em>答え。はい、可能です。ノンスは、ウォレットごとではなく、アカウントごとにカウントされています。</h4>