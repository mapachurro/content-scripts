<div class="callout callout--success">
<h4 id="01GRVFH3WQZAEN1PPJ4PTRJNH1">Новичок в крипте и web3?</h4>
<p>Перейдите в <a href="https://learn.metamask.io/">MetaMask Learn</a>, где специально для новичков простым языком объясняются основы web3. Платформа совершенно бесплатна, доступна на нескольких языках и включает такие полезные инструменты, как симуляторы, которые помогут вам освоиться в MetaMask.</p>
</div>

<h4 id="01GRVFZVD9WXPHNGSGH5X5AD96"><em>Эта статья содержит пояснения и ссылки на ресурсы, связанные с транзакциями и причинами их сбоя. Также ниже приведены ссылки на распространенные сценарии неудачных транзакций и способы их устранения:</em></h4>
<ul>
<li><a href="#h_01G79J04D0EN1VD8VS7C7J7KD1" target="_self">Анатомия блокчейн транзакции</a></li>
<li><a href="#h_01G79J09NWA8CGR4VYC2PT5B6Y" target="_self">Распространенные проблемы</a></li>
<li><a href="#h_01G79J0J8JTRPM9MRB76EN1GPP" target="_self">Основные способы решения</a></li>
<li><a href="#h_01G79J0RP8ZMZ1V1SKQY70TXCT" target="_self">Дополнительные ресурсы и последующие шаги</a></li>
<li><a href="#h_01G79J18RBK27GZCF10CGN9GKP" target="_self">Часто задаваемые вопросы</a></li>
</ul>
<p> </p>
<h2 id="h_01G79J04D0EN1VD8VS7C7J7KD1"><strong>Анатомия блокчейн транзакции</strong></h2>
<p>Когда мы говорим о «транзакциях» в публичной сети блокчейн, мы имеем в виду взаимодействие между двумя адресами. Иными словами, токены, взаимозаменяемые или нет, или иные криптоактивы «пересылаются» с одного адреса на другой. Существуют также транзакции, называемые «внутренними транзакциями», которые представляют собой взаимодействия между смарт-контрактами и, по большей части, выходят за рамки этой статьи.</p>
<div class="note note--info">
<h4 id="01GRVFZVD9JJ5G8Z7S4AE9G1ME" class="note-title">Хотите получить дополнительную информацию?</h4>
<p>Чтобы узнать больше о сетях блокчейна и о том, как они работают, ознакомьтесь с нашей <a href="https://metamask.zendesk.com/hc/en-us/articles/360015489611-Learn-the-basics-of-blockchains-and-Ethereum-miners-and-validators-gas-cryptocurrencies-and-NFTs-block-explorer-networks-etc-">вводной статьей здесь</a>, а если вы встречаете много незнакомых слов, обратитесь к нашему <a href="https://consensys.net/knowledge-base/a-blockchain-glossary-for-beginners/">глоссарию</a>.</p>
</div>
<p>Для ясности, на самом деле ничего никуда не <em>отправляется</em>. Сеть блокчейна с поддержкой смарт-контрактов, такая, как Ethereum, имеет ряд различных компонентов или функций. Одной из них является то, что мы бы назвали «компьютером», виртуальную машину Ethereum или EVM, которая способна запускать программы («смарт-контракты»). «Основой» системы, является <em>распределенный реестр</em>: <strong>представьте себе электронную таблицу, в которой содержатся все адреса кошельков Ethereum и напротив каждого адреса указан тип криптоактива, который он содержит.</strong> </p>
<p>Для иллюстрации воспользуемся примером. Скажем, что Гильом хочет отправить транзакцию Долорес. У Гильома 1,36 ETH в его аккаунте, и он планирует отправить Долорес 0,5 ETH. Похоже, у Долорес хороший день, даже на медвежьем рынке. </p>
<p>Гильом открывает кошелек MetaMask, вводит адрес Долорес, настраивает параметры газа, которые ему комфортно платить, и нажимает «Отправить».</p>
<p>На этом этапе транзакция переходит в состояние локального временного удержания, известного как <em>локальный пул памяти, </em>или <em>локальный мемпул</em>. Затем транзакция будет «подхвачена» ближайшим узлом в сети. Приоритет транзакции будет зависеть от <a href="https://metamask.zendesk.com/hc/en-us/articles/360022895972-Using-advanced-gas-controls">настроек газа</a> Гильома (<strong>чем больше Гильом готов заплатить за <a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">единицу газа</a>, тем быстрее будет обработана его транзакция</strong>), и будет передана на другие узлы в сети. Узлы выполнят проверку того, что у Гильома есть нужное количество ETH для списания, а затем фактически выполнят «транзакцию»: <strong>реестр будет изменен; 0,5 спишется с баланса Гильома и 0,5 зачислится Долорес. </strong></p>
<p><em>«Движущаяся рука, написав, движется дальше»:</em> ETH не перемещается по сети как таковой; это не электронное письмо, отправленное с компьютера Гильома в почтовый ящик Долорес в MetaMask или что-то в этом роде. Гильом отправил запрос, <strong>аутентифицированный с помощью его <a href="https://metamask.zendesk.com/hc/en-us/articles/4404722782107-User-guide-Secret-Recovery-Phrase-password-and-private-keys">приватных ключей через MetaMask</a></strong>, в сеть, чтобы дебетовать его аккаунт и кредитовать Долорес. И, после процесса проверки, запрограммированного в сетевых протоколах, это было сделано. </p>
<h4 id="01GRVFZVD9GG3MHV265Q5QBB9S"><em>Это все, что нужно для транзакции: запрос к реестру для релокации чего-либо с одного адреса на другой.</em></h4>
<p> </p>
<h2 id="h_01G79J09NWA8CGR4VYC2PT5B6Y"><strong>Когда что-то идет не так</strong></h2>
<p>Все может пойти не так по ряду причин. Ошибки часто могут носить «программный характер»: баг в MetaMask, неправильная конфигурация сети, которую вы пытаетесь использовать, или ошибка подключения.</p>
<p><strong>Распространенная проблема заключается в том, что пользователь, пытаясь заплатить меньше за свою транзакцию, устанавливает очень низкий лимит газа</strong>, а сеть настолько перегружена, что ни в одном блоке нет места для такой «дешевой» транзакции, иногда в течение очень долгого времени. В конце концов, эта транзакция станет «устаревшей», и пользователь будет вынужден ее отменить. </p>
<p><strong>Если вы отправили транзакцию и она не была завершена</strong>, ее статус в MetaMask будет отображаться как «В ожидании». </p>
<p><strong>Если вы отправили транзакцию, и она не удалась, наиболее вероятной причиной является нехватка газа</strong>: у вас «закончился газ», другими словами, стоимость транзакции в газе, умноженная на цену газа, давала общую сумму нативной валюты сети, превышающую сумму в вашем кошельке. </p>
<div class="note note--info">
<h4 id="01GRVFZVD9GH1B7F94WN13F3BH" class="note-title">Информация</h4>
<p>Подробнее о расчете газа см. в нашем <a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">руководстве по газу здесь</a>.</p>
</div>
<p>Это может произойти по ряду причин и нужно учитывать, какую транзакцию вы пытаетесь выполнить. Создание NFT во время пикового сетевого трафика может потребовать очень много газа. Если вы пробуете новую или экспериментальную транзакцию, возможно, стоит проверить ее в тестовой сети прежде, чем платить комиссию в реальной сети.</p>
<p> </p>
<h2 id="h_01G79J0J8JTRPM9MRB76EN1GPP"><strong>Решение проблемы</strong></h2>
<h3 id="01GRVFZVD9D3PVW0CHP2JYRM1A"><strong>Ключевой фактор #1: локальная или транслирована в сеть</strong></h3>
<p>Когда вы занимаетесь диагностикой проблемы с транзакцией, особенно, когда речь идет об ожидающей транзакции, вам нужно посмотреть, находится ли транзакция все еще в вашем локальном мемпуле или она попала в сеть и застряла там по какой-либо причине. Если она находится только в вашем локальном мемпуле, решение может быть таким же простым, как блокировка и разблокировка вашего кошелька MetaMask (<strong>убедитесь, что вы знаете свой пароль и создали резервную копию Secret Recovery Phrase, прежде чем делать это</strong>). Если она попала в сеть, решение будет более сложное.</p>
<p>Подробнее об устранении этих проблем, см. ссылки ниже.<br><br></p>
<h3 id="01GRVFZVD9J3NB03974CZWTT8A"><strong>Ключевой фактор #2: Nonce</strong></h3>
<p>Это слово может означать несколько разных вещей. Это сокращение от «number only used once» (одноразовое случайное число), и в этом контексте это означает «номер транзакции», начиная с первой транзакции, совершенной отправляющим адресом. У вас могут возникнуть серьезные проблемы, если вы, например, запускаете две разные транзакции из разных экземпляров MetaMask, с одним и тем же адресом кошелька в одно и то же время. <strong>Транзакции с вашего адреса должны идти в порядке возрастания в соответствии с их nonce. </strong> Однако так же, как nonces могут вызвать зависание транзакции, они могут быть ключом к тому, чтобы транзакцию разблокировать.</p>
<p>Подробнее об этой технике <a href="https://metamask.zendesk.com/hc/en-us/articles/360015489251-How-to-Speed-Up-or-Cancel-a-Pending-Transaction">см. здесь</a>.</p>
<p> </p>
<h2 id="h_01G79J0RP8ZMZ1V1SKQY70TXCT"><strong>Следующие шаги</strong></h2>
<h3 id="01GRVFZVD9Q63NF0SYR69AWPG6"><em>Если у вас есть неудачная или ожидающая транзакция, обратитесь за помощью к следующим ресурсам.</em></h3>
<h4 id="01GRVFZVD9NFGVSXR55JG8EYQK"><a href="https://metamask.zendesk.com/hc/en-us/articles/360015488931">Как отправить токены из вашего кошелька MetaMask</a></h4>
<h4 id="01GRVFZVD9N387HEW5ZJ53MK5Z"><a href="https://metamask.zendesk.com/hc/en-us/articles/360015489251-How-to-Speed-Up-or-Cancel-a-Pending-Transaction">Как ускорить или отменить транзакцию, ожидающую завершения</a></h4>
<h4 id="01GRVFZVD9TWRFF00FPPWFFYSD" class="article-title" title="Почему моя транзакция завершилась ошибкой «Недостаточно газа»? Как я могу это исправить?"><a href="https://metamask.zendesk.com/hc/en-us/articles/360038849792-Why-did-my-transaction-fail-with-an-Out-of-Gas-error-How-can-I-fix-it-">Почему моя транзакция завершилась ошибкой «Недостаточно газа»?</a></h4>
<h4 id="01GRVFZVD9XJVVHQK3J9F5Q4Z8"><a href="https://metamask.zendesk.com/hc/en-us/articles/360053394291-Uniswap-support-and-troubleshooting-tips">Устранение неполадок в Uniswap</a></h4>
<h4 id="01GRVFZVD9V5KZ7999CR0DHGGZ"><a href="https://metamask.zendesk.com/hc/en-us/articles/4404600179227-User-Guide-Gas">Руководство пользователя: Газ</a></h4>
<h4 id="01GRVFZVD9RDMNCVPMRVY7ZVGP"><a href="https://metamask.zendesk.com/hc/en-us/articles/360059957352-Can-I-reverse-an-already-confirmed-transaction-">Могу ли я отменить уже подтвержденную транзакцию?</a></h4>
<p> </p>
<h2 id="h_01G79J18RBK27GZCF10CGN9GKP"><strong>Часто задаваемые вопросы</strong></h2>
<h4 id="01GRVFZVD9XESKW1CA31WM5PWS">
<em>В: На одном аккаунте в моем кошельке есть ожидающая или находящаяся в очереди транзакция. Могу ли я начать еще одну транзакцию с другого аккаунта в том же кошельке?<br></em>О: Да, можете. Nonce рассчитывается для аккаунта, а не для кошелька.</h4>